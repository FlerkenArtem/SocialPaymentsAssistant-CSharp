# Интерактивный помощник для составления заявлений на получение социальных выплат

## Описание проекта

Десктопное приложение, разработанное на **C#** с использованием **.NET** и **Windows Forms**, предназначенное для автоматизации процесса подачи заявлений на социальные выплаты. Система поддерживает два типа пользователей:

- **Заявители** — могут регистрироваться, заполнять личные данные, подавать заявления на выплаты, отслеживать статус заявок, просматривать и сохранять справки в формате PDF.
- **Сотрудники** — обрабатывают заявки, проверяют документы, принимают или отклоняют заявления, формируют справки и управляют данными филиалов.

База данных реализована на **PostgreSQL 18**, интерфейс — с помощью **Windows Forms**, генерация документов — через библиотеку **iText**.

## Основные возможности

### Для заявителей:
- Регистрация и аутентификация
- Заполнение персональных данных (ФИО, паспорт, СНИЛС, полис ОМС, адреса, банковские реквизиты)
- Загрузка сканов документов (PNG)
- Подача заявлений на социальные выплаты
- Просмотр истории заявок с фильтрацией по типу, статусу и дате
- Просмотр и сохранение справок в формате PDF

### Для сотрудников:
- Регистрация с указанием должности, отдела и филиала
- Просмотр и фильтрация заявок, назначенных на сотрудника
- Принятие или отклонение заявлений с подтверждением паролем
- Корректировка суммы выплаты при принятии заявки
- Автоматическое формирование справок о выплатах в формате PDF
- Просмотр списка филиалов с фильтрацией

## Технологический стек

- **Язык программирования:** C#
- **Платформа:** .NET 10.0 (Windows Forms)
- **СУБД:** PostgreSQL 18 (с использованием хранимых процедур и функций)
- **Библиотеки:**
  - Npgsql — для работы с PostgreSQL
  - iText — для генерации PDF-документов
- **Архитектура:** Многослойная архитектура с разделением на модели, формы и хелперы
- **Контроль версий:** Git
- **ОС:** Windows 10/11

## Установка и настройка

### 1. Установка зависимостей

1. Установите **.NET SDK 10.0** или выше
2. Установите **PostgreSQL 18** и создайте базу данных:
   ```sql
   CREATE DATABASE social_payments_assistant;
   ```
3. Импортируйте схему БД из приложенного SQL-файла **social_payments_assistant.sql**.

### 2. Настройка подключения к базе данных

Измените строку подключения в файле `DatabaseHelper.cs`:
```csharp
private static string connectionString = "Host=localhost;Database=social_payments_assistant;Username=postgres;Password=ваш_пароль";
```

### 3. Сборка и запуск проекта

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/FlerkenArtem/SocialPaymentAssistant-CSharp
   cd SocialPaymentAssistant-CSharp
   ```

2. Восстановите зависимости:
   ```bash
   dotnet restore
   ```

3. Соберите проект:
   ```bash
   dotnet build
   ```

4. Запустите приложение:
   ```bash
   dotnet run
   ```

Или откройте решение `SocialPaymentsAssistant.sln` в Visual Studio 2022+ и запустите проект.

## Запуск программы

После сборки запустите приложение. Откроется окно входа в систему.

### Тестовые данные:
- Для входа как заявитель или сотрудник используйте учётные данные, созданные при регистрации.
- Первый запуск требует регистрации нового пользователя.

## Структура проекта

```
SocialPaymentsAssistant/
├── Program.cs                             # Точка входа в приложение
├── DatabaseHelper.cs                      # Класс для работы с базой данных
├── ApplicationInfo.cs                     # Класс для работы с PDF
├── Models/                                # Модели данных
│   ├── ApplicationData.cs                 # Модель данных заявки для заявителя
│   ├── AcceptedApplicationData.cs         # Модель данных принятой заявки
│   ├── EmpApplicationData.cs              # Модель данных заявки для сотрудника
│   ├── BranchOffice.cs                    # Модель данных филиала
│   ├── MyApplicationsModel.cs             # Модель для отображения "Моих заявок"
│   ├── AcceptedApplicationsModel.cs       # Модель для отображения "Принятых заявок"
│   ├── EmpApplicationsModel.cs            # Модель для отображения заявок сотрудника
│   └── BranchOfficesListModel.cs          # Модель для отображения списка филиалов
├──  LoginWidget.cs/.Designer.cs           # Форма входа в систему
├── RegistrationWidget.cs/.Designer.cs     # Форма выбора роли при регистрации
├── ApplicantReg.cs/.Designer.cs           # Форма регистрации заявителя
├── EmpReg.cs/.Designer.cs                 # Форма регистрации сотрудника
├── MainWindow.cs/.Designer.cs             # Главное окно заявителя
├── EmpMainWindow.cs/.Designer.cs          # Главное окно сотрудника
├── NewApplication.cs/.Designer.cs         # Форма создания новой заявки
├── BranchOfficesList.cs/.Designer.cs      # Форма просмотра списка филиалов
├── About.cs/.Designer.cs                  # Форма "О программе"
├── PdfDocumentGenerator.cs                # Генератор PDF-документов для справок
├── SocialPaymentsAssistant.csproj         # Файл проекта .NET с зависимостями
├── social_payments_assistant.sql          # SQL-скрипт для создания БД 
├── LICENSE                                # Лицензия MIT
└── README.md                              # Документация проекта
```

## Архитектура и особенности реализации

- **Аутентификация**: Использование хранимой функции `authenticate_user` в PostgreSQL 18
- **Регистрация**: Хранимые процедуры `new_applicant` и `new_emp` для целостности данных
- **Работа с данными**: Класс `DatabaseHelper` для безопасного выполнения SQL-запросов
- **Валидация**: Проверка данных на клиентской и серверной сторонах
- **Генерация документов**: Создание PDF-справок с помощью библиотеки iText
- **Работа с изображениями**: Загрузка и сохранение сканов документов в формате PNG в БД
- **Фильтрация данных**: Использование `DataView` для фильтрации табличных данных
- **Безопасность**: Проверка паролей, параметризованные запросы для защиты от SQL-инъекций

## Авторы

- **Хромов А.Е.** — тимлид, автор документации
- **Карташова В.А.** — аналитик
- **Горбунова Е.А.** — программист
- **Сафонова Д.А.** — программист
- **Тылик А.В.** — программист

- **Левшин С.С.** — научный руководитель

Воронежский государственный технический университет, Строительно-политехнический колледж, группа ИСП-234о.

Проект создан в учебных целях в рамках дисциплины "МДК.02.01 Технология разработки программного обеспечения".

---

### Примечания

- Для корректной работы требуется установленный .NET Runtime 10.0+
- Для работы с базой данных требуется PostgreSQL 18
- При возникновении ошибок подключения к БД проверьте правильность строки подключения и состояние службы PostgreSQL
- Для работы с PDF-документами необходим пакет iText
- При регистрации заявителя требуются сканы документов в формате PNG
- Проект использует Windows Forms и работает только в ОС Windows